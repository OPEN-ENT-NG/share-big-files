<div class="row">
	<nav class="contextual-buttons twelve cell">
		<div class="action-buttons">
			<button workflow="sharebigfiles.create" ng-click="redirect('/create')"><i18n>sharebigfiles.create</i18n></button>
		</div>
	</nav>
	<!-- Lightbox : Share sharebigfiles -->
	<div ng-if="display.showPanel">
		<lightbox show="display.showPanel" on-close="display.showPanel = false;">
			<share-panel app-prefix="'sharebigfiles'" resources="uploads.selection()"></share-panel>
		</lightbox>
	</div>
</div>
<article class="list-view">
	<table class="twelve">
		<thead class="tableheader whiteheader">
		<tr>
			<th class="icon" />
			<th class="content">
				<span translate content="title" ng-click="orderBy('title')"></span>
			</th>
			<th class="user">
				<span translate content="from" ng-click="orderBy('owner.displayName')"></span>
			</th>
			<th class="date">
				<span translate content="date" ng-click="orderBy('modified.$date')"></span>
			</th>
			<th class="date">
				<span translate content="Expire" ng-click="orderBy('modified.$date')"></span>
			</th>
			<th class="content">
				<span translate content="downloaded" ng-click="orderBy('owner.displayName')"></span>
			</th>
			<th class="content">
				<span translate content="size" ng-click="orderBy('owner.displayName')"></span>
			</th>
			<th class="content">
			</th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="sharebigfiles in uploads.all | orderBy:modified.$date" ng-class="{ checked: sharebigfiles.selected }">
			<td class="icon">
				<behaviour name="read" resource="sharebigfiles">
					<input type="checkbox" ng-model="sharebigfiles.selected"/>
				</behaviour>
			</td>
			<td class="content">
				<a ng-click="redirect('/downloadFile/' + '[[sharebigfiles._id]]')" tooltip="sharebigfiles.tooltip.download">
					[[sharebigfiles.fileNameLabel]]
				</a>
			</td>
			<td class="user">
				<a href="/userbook/annuaire#[[sharebigfiles.owner.userId]]">[[sharebigfiles.owner.displayName]]</a>
			</td>
			<td class="date">
				[[sharebigfiles.creationDate()]]
			</td>
			<td class="date">
				[[sharebigfiles.expireDate()]]
			</td>
			<td class="content">
				<a ng-if="[[sharebigfiles.downloadLogs.length]]>0 && canContribute(sharebigfiles)" tooltip="sharebigfiles.downloadedFileLog" ng-click="redirect('/editFileLog/' + '[[sharebigfiles.fileId]]')">
					[[sharebigfiles.downloadLogs.length]] <i18n>sharebigfiles.time</i18n>
				</a>
				<div ng-if="canContribute(sharebigfiles) === false" >
					[[sharebigfiles.downloadLogs.length]] <i18n>sharebigfiles.time</i18n>
				</div>
				<div ng-if="[[sharebigfiles.downloadLogs.length]]===0" >
					0 <i18n>sharebigfiles.time</i18n>
				</div>
			</td>
			<td class="content">
				[[formatDocumentSize(sharebigfiles.fileMetadata.size)]]
			</td>
			<td class="content">
				<a ng-click="redirect('/view/' + sharebigfiles._id)" tooltipe="sharebigfiles.label.edit"><i18n>sharebigfiles.label.edit</i18n></a>
			</td>
		</tr>
		</tbody>
	</table>
</article>